{% extends "base_without_sidebar.html" %}
{% load i18n %}
{% load static %}
{% load compile_static %}
{% load mptt_tags %}
{% load bootstrap3 %}

{% block css %}
    {{ block.super }}
    <link rel="stylesheet" href="{% static 'less/emails.less'|compile %}" />
{% endblock %}

{% block title %}{% trans 'Search emails' %}{% endblock title %}

{% block content %}
	{{ block.super }}

	<form method="post" action="#results" class="form">
		{% bootstrap_form search_form %}
		{% csrf_token %}
		{% buttons %}
			<button type="submit" class="btn btn-primary">{% trans 'Search' %}</button>
		{% endbuttons %}
	</form>

	<h2 id="results">{% trans 'Search results' %}</h2>
	{% if emails|length == 0 %}
		<div class="alert alert-warning">{% trans 'No emails found for the given search query.' %}</div>
	{% else %}
		<ul class="email-tree">
		{% for email in emails %}
			<li>
				<a href="{% url 'emails:view' email.id %}">{{ email.subject_nonempty }}</a>
			</li>
		{% endfor %}
		</ul>
	{% endif %}
{% endblock %}
